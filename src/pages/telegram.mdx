# How to implement Telegram as a provider

<div style={{ borderRadius: '10px', backgroundColor: '#211951', padding: '.5rem'}}>
  <span style={{ color: 'white', fontSize: "21px" }}>&#9432;</span> Create your first Telegram bot if you don't have one yet [create your firts Telegram bot](https://core.telegram.org/bots/tutorial, "Create your firts Telegra bot")
</div>

To implement a chatbot on Telegram, you need to install the library `@builderbot-plugins/telegram`

run this command in your console
```bash
    pnpm install @builderbot-plugins/telegram
```

You must have your environment __TELEGRAM_TOKEN__ set in your `.env` for the plugin to work

```typescript
    import 'dotenv/config'
    import { createBot, MemoryDB, createProvider, addKeyword, createFlow, EVENTS } from '@bot-whatsapp/bot'
    import { createShopifyFlow } from '@builderbot-plugins/shopify'
    import { TelegramProvider } from '@builderbot-plugins/telegram'


    const main = async () => {

        const provider = createProvider(TelegramProvider)

        const { flow } = await createShopifyFlow()

        await createBot({
            database: new MemoryDB(),
            provider,
            flow: createFlow(flow)
        })

    }

    main()
```


```typescript
    import 'dotenv/config'
    import { createBot, MemoryDB, createProvider, addKeyword, createFlow, EVENTS } from '@bot-whatsapp/bot'
    import { createShopifyFlow } from '@builderbot-plugins/shopify'
    import { TelegramProvider } from '@builderbot-plugins/telegram'


    const main = async () => {

        const provider = createProvider(TelegramProvider, {
            token: process.env.TELEGRAM_TOKEN
        })

        const { flow } = await createShopifyFlow()

        await createBot({
            database: new MemoryDB(),
            provider,
            flow: createFlow(flow)
        })

    }

    main()
```


```typescript
    import 'dotenv/config'
    import { createBot, MemoryDB, createProvider, addKeyword, createFlow, EVENTS } from '@bot-whatsapp/bot'
    import { createShopifyFlow } from '@builderbot-plugins/shopify'
    import { TelegramProvider } from '@builderbot-plugins/telegram'


    const main = async () => {

        const provider = createProvider(TelegramProvider, {
            token: 'YOUR_TOKEN_HERE'
        })

        const { flow } = await createShopifyFlow()

        await createBot({
            database: new MemoryDB(),
            provider,
            flow: createFlow(flow)
        })

    }

    main()
```

This plugin, like the default providers, extends from the __Providerclass__ and integrates with the `bot-whatsapp` library through the __createProvider function__.

This provider, like the default providers, also exposes a function to create webhooks if needed. For this, you need to instantiate the function that exposes a __Polka__ server in which you need to declare the __handleCtx callback__ to handle the entire context of your chatbot.

```typescript
    import 'dotenv/config'
    import { createBot, MemoryDB, createProvider, addKeyword, createFlow, EVENTS } from '@bot-whatsapp/bot'
    import { createShopifyFlow } from '@builderbot-plugins/shopify'
    import { TelegramProvider, handleCtx } from '@builderbot-plugins/telegram'

    const main = async () => {

        const provider = createProvider(TelegramProvider)
        /**  your Polka server instance here */
        provider.initHttpServer(9000)
            /** your webhook handle for the bot */
            .http.server.post('/webhook', handleCtx(({
                { telegram },
                sendMessage
                }, req, res) => {
                   /* your top level function */
                    sendMessage(req.body.chatId, req.body.message)
                    /* or */
                    /* your own implementation of sendMessage using the core package library */
                    telegram.sendMessage(req.body.chatId, req.body.message)
                    res.end('ok')
                }))

        const { flow } = await createShopifyFlow()

        await createBot({
            database: new MemoryDB(),
            provider,
            flow: createFlow(flow)
        })

    }

    main()
```

The `sendMessage` function is a top-level function that abstracts the responsibility of message sending to the library, allowing the developer to focus solely on chatbot creation.