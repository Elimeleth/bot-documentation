import { Contributors } from '@/components/Contributors'
import { Resources } from '@/components/Resources'
import { Guides } from '@/components/Guides'

export const description =
  'In this guide, we will discuss how to create a Dockerfile and how to deploy your bot.'

# Deploy


Previously, you need to have [Docker installed](https://docs.docker.com/get-docker/) on your server depending on the operating system, the processes change, you can find all the official information about docker at this link.

Depending on the provider you have chosen, you will need a specific Docker implementation, but don't worry, as it comes automatically implemented in a file called Dockerfile, you can also view the other Dockerfiles in the templates section.

```docker {{ title: 'Dockerfile' }}
# THIS IS THE BASE IMAGE FOR THE BOT
FROM node:21-alpine3.18 as builder

# Enable Corepack and prepare for PNPM installation to increase performance
RUN corepack enable && corepack prepare pnpm@latest --activate
ENV PNPM_HOME=/usr/local/bin

# Set the working directory
WORKDIR /app

# Copy package.json and pnpm-lock.yaml files to the working directory
COPY package*.json pnpm-lock.yaml ./

# Install dependencies using PNPM
COPY . .
RUN pnpm i

# Create a new stage for deployment
FROM builder as deploy

# Copy only necessary files and directories for deployment
COPY --from=builder /app/src ./src
COPY --from=builder /app/package.json /app/pnpm-lock.yaml ./

RUN pnpm install
CMD ["pnpm", "start"]
```
---

## Build Image 
In this step, we are going to build the Docker image with all the settings of your project, remember that depending on the libraries you are using, you may need to modify the `Dockerfile` for it to function correctly.
``` {{ title:'Build Image'}}
docker build . -t builderbot:latest
```

You can see in your console that the image starts to build and the process logs are coming out, you must ensure that it ends with `naming to docker.io/library/builderbot:latest`

```
 => [internal] load build definition from Dockerfile                                             0.4s
 => [internal] load metadata for docker.io/library/node:21-alpine3.18                            3.6s
 => ....................
 => => naming to docker.io/library/builderbot:latest
```

``` {{ title:'Run Container'}}
docker run -d -p 3001:3001 builderbot:latest
```

---

## Docker run

To run your containerized image by passing different environment variables depending on the configuration needed, you can do it in the following way.

```{{ title:'Run Container'}}
docker rm -f bot 2>/dev/null
docker run -d \
  --name bot \
  --cap-add=SYS_ADMIN \
  -e OPENAI_API_KEY=YOUR_VALUE_OPENAI_API_KEY \
  -e PORT=9000 \
  -v $(pwd)/bd.bin:/app/bd.bin:rw \
  -v /root/bot_sessions:/app/bot_sessions:rw \
  -p 3001:3001 \
  --restart always \
  builderbot:latest
```