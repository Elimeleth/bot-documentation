import { Contributors } from '@/components/Contributors'
import { Resources } from '@/components/Resources'
import { Guides } from '@/components/Guides'

export const description = 'Implement vision for your chatbot solution'

# Chatbot with Vision

The gemini model is a generous and valuable resource to use if it comes to creating a product with AI that has both vision and text generation and without spending a penny is what we want.

To start remember to install the gemini plugin and have your [Google Api key](https://aistudio.google.com/app/apikey)

## Implement a flow vision

`pnpm install "@builderbot-plugins/gemini-layer`

geminiLayer is a layer that is added in the addAction this needs certain parameters which are:

`vision`: true\
`visionPrompt`: What you want the model to see\
`image_path`: the route where the image will be downloaded to be analyzed later\
`cb` a callback that receives the same interface as the addAction and which returns a answer in the state

<CodeGroup>
```ts {{ title: 'app.ts' }}
import { createbot, createProvider, createFlow, MemoryDB } from '@builderbot/bot'
import { BaileysProvider } from '@builderbot/provider-baileys'

import imageFlow from "./flows/image.flow"

/* SOME STUFF IMPORTS */

await createbot({
    database: new MemoryDB(),
    provider: createProvider(BaileysProvider),
    flow: createFlow([imageFlow])
})

```
```ts {{ title: 'flows/image.flow.ts' }}

import { EVENTS, addKeyword } from "@builderbot/bot"
import imageLayer from "./layers/image.layer"

export default addKeyword(EVENTS.MEDIA)
    .addAction(imageLayer)

```


```ts {{ title: 'layers/image.layer.ts' }}

import { geminiLayer } from "@builderbot-plugins/gemini-layer"
import { EVENTS, addKeyword } from "@builderbot/bot"

const visionPrompt = 'Give me a brief summary of what you see in the picture'

export default async (...bot: any) => await geminiLayer({
        vision: true,
        visionPrompt,
        image_path: './',
        cb: async (_, { state, gotoFlow }) => {
            const { answer } = state.getMyState()
            console.log('answer about image', answer)

            if (answer === 'anything else you want to validate') {
                return gotoFlow('any flow you want to go')
            }
        }
    }, bot)

```

</CodeGroup>

<Contributors users={['elimeleth']} />

<Guides />

<Resources />